<head>
  <!-- HTML Meta Tags -->
  <title>Urban Scapes City Planner</title>
  <!-- set the favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

  <!-- set some meta tags -->

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- the styling that our site uses -->
  <link rel="stylesheet" href="style.css">

  <script>
    // Function to create and download JSON file
    function downloadJSON() {
      const filename = 'City_JSON_' + Date.toISOString() + '.json';
      const file = scene.toJSON();
      const jsonBlob = new Blob([JSON.stringify(file, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(jsonBlob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>

  <!-- include the three.js library -->
  <script type="text/javascript" src="js/vendor/three.js"> </script>

  <!-- include the trackball code -->
  <script type="text/javascript" src="js/vendor/OrbitControls.js"> </script>

  <!-- include the model loader -->
  <script type="text/javascript" src="js/vendor/PLYLoader.js"></script>

  <!-- include the GUI -->
  <script type="text/javascript" src="js/vendor/dat.gui.min.js"></script>

  <!-- include performance stats -->
  <script type="text/javascript" src="js/vendor/stats.min.js"></script>

  <!-- include the first person controls -->
  <script type="text/javascript" src="js/vendor/PointerLockControls.js"></script>
</head>

<body>
  <!-- The main information panel, shown in the top-left -->
  <div id="info-panel">
    <h1 style="font-family: Myriad Pro Regular;">UrbanScapes City Planner </h1>

    <div id="info-content">
      <!-- <h3>Press the '<i>Generate New</i>' button to start!</h3> -->
      <h3 style="font-family: Myriad Pro Regular;">An Open Platform for City Building and Visualization</h3>
      <h3>Built with ❤️ at HackXcelerate, CBIT. </h3>


      <!-- <h4>Camera Controls</h4>
      <ul>
        <li>Left Click + Drag to Rotate</li>
        <li>Right Click + Drag to Pan</li>
        <li>Scroll Wheel to Zoom</li>
        <li>Space to move up</li>
        <li>Left shift to move down</li>
      </ul> -->
      <!-- 
      <h4>First Person Mode Controls</h4>
      <ul>
        <li>Move mouse to rotate</li>
        <li>W to move forwards</li>
        <li>A to move left</li>
        <li>S to move backwards</li>
        <li>D to move right</li>
      </ul> -->
      <!-- 
      <h4>Building Controls</h4>
      <ul>
        <li>Left Click to select</li>
        <li>Right Click to de-select</li>
        <li>Left Click again to move the building</li>
      </ul> -->

    </div>

    <div id="info-btn" class="btn">[click panel anywhere to hide]</div>

  </div>

  <div id="info-panel" style="margin-top: 175px;">
    <h4 class="button-par">Themes</h4>
    <!-- theme shifting buttons -->
    <Button style=" display: flex;
      flex-direction: column;
      align-items: center;
      padding: 6px 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
      border-radius: 6px;
      border: none;
      margin-bottom: 10px;
      background: #6E6D70;
      box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12);
      color: #DFDEDF;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;" class="eTheme" type="button">Energy Consumption</Button>
    <Button style=" display: flex;
      flex-direction: column;
      align-items: center;
      padding: 6px 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
      border-radius: 6px;
      border: none;
      margin-bottom: 10px;
    
      background: #6E6D70;
      box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12);
      color: #DFDEDF;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;" class="pTheme" type="button">Pollution Levels</Button>
    <Button style=" display: flex;
      flex-direction: column;
      align-items: center;
      padding: 6px 14px;
      font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
      border-radius: 6px;
      border: none;
    
      background: #6E6D70;
      box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12);
      color: #DFDEDF;
      user-select: none;
      -webkit-user-select: none;
      touch-action: manipulation;" class="Hindex" type="button">Happiness Index</Button>
    <!-- <Button onclick="downloadJSON(scene, 'hello.json');console.log('Hello')" >Download</Button> -->
    <br />
    <h4>Import City</h4>
    <input style=" display: flex;
    flex-direction: column;
    align-items: center;
    padding: 6px 14px;
    font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
    border-radius: 6px;
    border: none;
    margin-bottom: 10px;
    background: #6E6D70;
    box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12);
    color: #DFDEDF;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;" type="file" id="fileInput">
    <button style=" display: flex;
    flex-direction: column;
    align-items: center;
    padding: 6px 14px;
    font-family: -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
    border-radius: 6px;
    border: none;
  
    background: #6E6D70;
    box-shadow: 0px 0.5px 1px rgba(0, 0, 0, 0.1), inset 0px 0.5px 0.5px rgba(255, 255, 255, 0.5), 0px 0px 0px 0.5px rgba(0, 0, 0, 0.12);
    color: #DFDEDF;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;" id="loadButton">Apply</button>
  </div>


  <script>
    document.getElementById('loadButton').addEventListener('click', function () {
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (event) {
          const jsonData = JSON.parse(event.target.result);
          scene = new THREE.ObjectLoader().parse(jsonData);
          // console.log(jsonData);
          // Now you can use jsonData as needed
        };
        reader.readAsText(file);
      } else {
        console.error('No file selected.');
      }
    });
  </script>

  <!-- Setup the City Generator -->
  <script type="text/javascript" src="js/setup.js"></script>

  <!-- Handle user inputs -->
  <script type="text/javascript" src="js/inputController.js"></script>

  <!-- Generate the city -->
  <script type="text/javascript" src="js/cityGenerator.js"></script>

  <!-- Handle the Controls GUI -->
  <script type="text/javascript" src="js/gui.js"></script>

  <!-- Show some stats -->
  <script type="text/javascript" src="js/stats.js"></script>

  <!-- Add the main logic -->
  <script type="text/javascript" src="js/main.js"></script>
</body>

</html>